{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\prash\\\\Desktop\\\\React\\\\ecom-clothing\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _objectSpread from\"C:\\\\Users\\\\prash\\\\Desktop\\\\React\\\\ecom-clothing\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"C:\\\\Users\\\\prash\\\\Desktop\\\\React\\\\ecom-clothing\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\Users\\\\prash\\\\Desktop\\\\React\\\\ecom-clothing\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\prash\\\\Desktop\\\\React\\\\ecom-clothing\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _createSuper from\"C:\\\\Users\\\\prash\\\\Desktop\\\\React\\\\ecom-clothing\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import _inherits from\"C:\\\\Users\\\\prash\\\\Desktop\\\\React\\\\ecom-clothing\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from'react';import{Switch,Route,Redirect}from'react-router-dom';import{connect}from'react-redux';import{setCurrentUser as _setCurrentUser}from'./redux/user/user-actions.js';import{selectCurrentUser}from'./redux/user/user-selector.js';import'./App.css';import{HomePage}from'./pages/hompage/homepage.jsx';import ShopPage from'./pages/shop/shop.jsx';import Header from'./components/header/header.jsx';import SignInAndSignUpPage from'./pages/sign-in-sign-up/sign-in-sign-up.jsx';import CheckoutPage from'./pages/checkout/checkout.jsx';import{auth,createUserProfileDocument}from\"./firebase/firebase.js\";var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.unSubscribedFromAuth=null;return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var setCurrentUser=this.props.setCurrentUser;this.unSubscribedFromAuth=auth.onAuthStateChanged(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(userAuth){var userRef;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!userAuth){_context.next=7;break;}_context.next=3;return createUserProfileDocument(userAuth);case 3:userRef=_context.sent;userRef.onSnapshot(function(snapshot){setCurrentUser(_objectSpread({id:snapshot.id},snapshot.data()));});_context.next=8;break;case 7:setCurrentUser(userAuth);case 8:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.unSubscribedFromAuth();}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/\",component:HomePage}),/*#__PURE__*/React.createElement(Route,{path:\"/shop\",component:ShopPage}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/signin\",render:function render(){return _this2.props.currentUser?/*#__PURE__*/React.createElement(Redirect,{to:\"/\"}):/*#__PURE__*/React.createElement(SignInAndSignUpPage,null);}}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/checkout\",component:CheckoutPage})));}}]);return App;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{currentUser:selectCurrentUser(state)};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{setCurrentUser:function setCurrentUser(user){return dispatch(_setCurrentUser(user));}};};export default connect(mapStateToProps,mapDispatchToProps)(App);// how reducer and root reducer get the user object is handled by redux internally, it is not something we can observe from our side, redux structure all this together without us seeing it\n// actually saying how user reducer and root reducer get the object is a bit misleading, it is actually all reducers that will receive the action object, root reducer job simply structure all(you can combine partially) reducer together","map":{"version":3,"sources":["C:/Users/prash/Desktop/React/ecom-clothing/src/App.js"],"names":["React","Switch","Route","Redirect","connect","setCurrentUser","selectCurrentUser","HomePage","ShopPage","Header","SignInAndSignUpPage","CheckoutPage","auth","createUserProfileDocument","App","unSubscribedFromAuth","props","onAuthStateChanged","userAuth","userRef","onSnapshot","snapshot","id","data","currentUser","Component","mapStateToProps","state","mapDispatchToProps","dispatch","user"],"mappings":"+4BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,MAAT,CAAiBC,KAAjB,CAAwBC,QAAxB,KAAwC,kBAAxC,CAEA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,cAAc,GAAdA,CAAAA,eAAT,KAA+B,8BAA/B,CACA,OAASC,iBAAT,KAAkC,+BAAlC,CAEA,MAAO,WAAP,CACA,OAASC,QAAT,KAAyB,8BAAzB,CACA,MAAOC,CAAAA,QAAP,KAAqB,uBAArB,CACA,MAAOC,CAAAA,MAAP,KAAmB,gCAAnB,CACA,MAAOC,CAAAA,mBAAP,KAAgC,6CAAhC,CACA,MAAOC,CAAAA,YAAP,KAAyB,+BAAzB,CAEA,OAASC,IAAT,CAAeC,yBAAf,KAAgD,wBAAhD,C,GAGMC,CAAAA,G,2TAEJC,oB,CAAuB,I,4FAEH,IAEVV,CAAAA,cAFU,CAES,KAAKW,KAFd,CAEVX,cAFU,CAIlB,KAAKU,oBAAL,CAA4BH,IAAI,CAACK,kBAAL,0FAAwB,iBAAMC,QAAN,kIAC9CA,QAD8C,+CAE1BL,CAAAA,yBAAyB,CAACK,QAAD,CAFC,QAE1CC,OAF0C,eAIhDA,OAAO,CAACC,UAAR,CAAmB,SAAAC,QAAQ,CAAI,CAC7BhB,cAAc,gBACZiB,EAAE,CAAED,QAAQ,CAACC,EADD,EAETD,QAAQ,CAACE,IAAT,EAFS,EAAd,CAID,CALD,EAJgD,6BAYhDlB,cAAc,CAACa,QAAD,CAAd,CAZgD,sDAAxB,+DAA5B,CAeD,C,mEAEsB,CACrB,KAAKH,oBAAL,GACD,C,uCAGQ,iBACP,mBACE,4CACE,oBAAC,MAAD,MADF,cAEE,oBAAC,MAAD,mBACE,oBAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,GAAlB,CAAsB,SAAS,CAAER,QAAjC,EADF,cAEE,oBAAC,KAAD,EAAO,IAAI,CAAC,OAAZ,CAAoB,SAAS,CAAEC,QAA/B,EAFF,cAGE,oBAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,SAAlB,CACE,MAAM,CAAE,wBACN,CAAA,MAAI,CAACQ,KAAL,CAAWQ,WAAX,cAA0B,oBAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EAA1B,cACG,oBAAC,mBAAD,MAFG,EADV,EAHF,cAQE,oBAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,WAAlB,CAA8B,SAAS,CAAEb,YAAzC,EARF,CAFF,CADF,CAgBD,C,iBA/CeX,KAAK,CAACyB,S,EAkDxB,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,KAAD,QAAY,CAClCH,WAAW,CAAElB,iBAAiB,CAACqB,KAAD,CADI,CAAZ,EAAxB,CAIA,GAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAAAC,QAAQ,QAAK,CACtCxB,cAAc,CAAE,wBAAAyB,IAAI,QAAID,CAAAA,QAAQ,CAACxB,eAAc,CAACyB,IAAD,CAAf,CAAZ,EADkB,CAAL,EAAnC,CAIA,cAAe1B,CAAAA,OAAO,CAACsB,eAAD,CAAkBE,kBAAlB,CAAP,CAA6Cd,GAA7C,CAAf,CAGA;AAEA","sourcesContent":["import React from 'react';\nimport { Switch, Route, Redirect } from 'react-router-dom';\n\nimport { connect } from 'react-redux';\nimport { setCurrentUser } from './redux/user/user-actions.js';\nimport { selectCurrentUser } from './redux/user/user-selector.js';\n\nimport './App.css';\nimport { HomePage } from './pages/hompage/homepage.jsx';\nimport ShopPage from './pages/shop/shop.jsx'\nimport Header from './components/header/header.jsx';\nimport SignInAndSignUpPage from './pages/sign-in-sign-up/sign-in-sign-up.jsx';\nimport CheckoutPage from './pages/checkout/checkout.jsx';\n\nimport { auth, createUserProfileDocument } from \"./firebase/firebase.js\";\n\n\nclass App extends React.Component {\n\n  unSubscribedFromAuth = null;\n\n  componentDidMount() {\n\n    const { setCurrentUser } = this.props;\n\n    this.unSubscribedFromAuth = auth.onAuthStateChanged(async userAuth => {\n      if (userAuth) {\n        const userRef = await createUserProfileDocument(userAuth);\n\n        userRef.onSnapshot(snapshot => {\n          setCurrentUser({\n            id: snapshot.id,\n            ...snapshot.data()\n          });\n        });\n\n      } else {\n        setCurrentUser(userAuth);\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    this.unSubscribedFromAuth();\n  }\n\n\n  render() {\n    return (\n      <div>\n        <Header />\n        <Switch>\n          <Route exact path='/' component={HomePage} />\n          <Route path='/shop' component={ShopPage} />\n          <Route exact path='/signin'\n            render={() =>\n              this.props.currentUser ? (<Redirect to='/' />) :\n                (<SignInAndSignUpPage />)\n            } />\n          <Route exact path='/checkout' component={CheckoutPage} />\n\n        </Switch>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  currentUser: selectCurrentUser(state),\n})\n\nconst mapDispatchToProps = dispatch => ({\n  setCurrentUser: user => dispatch(setCurrentUser(user)),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n\n\n// how reducer and root reducer get the user object is handled by redux internally, it is not something we can observe from our side, redux structure all this together without us seeing it\n\n// actually saying how user reducer and root reducer get the object is a bit misleading, it is actually all reducers that will receive the action object, root reducer job simply structure all(you can combine partially) reducer together\n\n"]},"metadata":{},"sourceType":"module"}